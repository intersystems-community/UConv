<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Routine name="sockclient" type="MAC" languagemode="0"><![CDATA[
#include %occStatus
Start(str)
  set sock = ##class(%IO.Socket).%New() 
  set sock.TranslationTable="UTF8"

  write #,"Запуск клиента...", ! 

  #; параметры: pHost, pPort, pTimeout, pSC
  do sock.Open("127.0.0.1","7001",1,.sc)

  if $$$ISOK(sc) {

    #; параметры: pData, pFlush
    do sock.Write($zt($ZHOROLOG), $$$YES, .sc) 

    #; параметры: pMaxReadLen, pTimeout
    write sock.ReadAny(250, 5),!

    hang 2
    
    do sock.Write("bye!", $$$YES) 
    write sock.ReadAny(250, 5),!

    do sock.Close()

    write "Останов клиента...", ! 
  }
  Quit
]]></Routine>
</Export>
